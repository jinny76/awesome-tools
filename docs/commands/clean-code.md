# Clean Code (cc) - Vueé¡¹ç›®æ­»ä»£ç æ¸…ç†å·¥å…·

æ™ºèƒ½åˆ†æVue+Viteé¡¹ç›®ï¼Œè¯†åˆ«å¹¶æ¸…ç†æœªä½¿ç”¨çš„æ–‡ä»¶ã€å¯¼å‡ºå’Œè·¯ç”±ã€‚æ”¯æŒé™æ€åˆ†æå’Œè¿è¡Œæ—¶æ‰«æåŒé‡æ£€æµ‹ã€‚æ”¯æŒMCPæœåŠ¡å™¨é›†æˆï¼Œå¯åœ¨Claude Desktopä¸­é€šè¿‡`clean_code_analyze`å·¥å…·ç›´æ¥ä½¿ç”¨ã€‚

## å¿«é€Ÿå¼€å§‹

```bash
# ä½¿ç”¨ç¼©å†™å‘½ä»¤ (æ¨è)
ats cc -d <é¡¹ç›®ç›®å½•> [é€‰é¡¹]

# å®Œæ•´å‘½ä»¤
awesome-tools clean-code -d <é¡¹ç›®ç›®å½•> [é€‰é¡¹]
```

## å‘½ä»¤é€‰é¡¹

### å¿…éœ€å‚æ•°
| é€‰é¡¹ | è¯´æ˜ |
|------|------|
| `-d, --dir <path>` | å‰ç«¯é¡¹ç›®æ ¹ç›®å½•è·¯å¾„ |

### å¯é€‰å‚æ•°
| é€‰é¡¹ | è¯´æ˜ | é»˜è®¤å€¼ |
|------|------|--------|
| `-e, --entry <paths>` | è‡ªå®šä¹‰å…¥å£æ–‡ä»¶ (é€—å·åˆ†éš”) | è‡ªåŠ¨æ£€æµ‹ |
| `-b, --backup` | æ‰§è¡Œæ¸…ç†å‰åˆ›å»ºå¤‡ä»½ | `true` |
| `--dry-run` | é¢„è§ˆæ¨¡å¼ï¼Œåªæ˜¾ç¤ºè¦åˆ é™¤çš„æ–‡ä»¶ | `false` |
| `--skip-test` | è·³è¿‡npm run devæµ‹è¯•éªŒè¯ | `false` |
| `--include <patterns>` | é¢å¤–åŒ…å«çš„æ–‡ä»¶æ¨¡å¼ | `*.ts,*.tsx` |
| `--exclude <patterns>` | æ’é™¤çš„æ–‡ä»¶æ¨¡å¼ | `node_modules/**,dist/**` |
| `--no-gitignore` | å¿½ç•¥.gitignoreè§„åˆ™ | `false` |
| `--debug` | æ˜¾ç¤ºè¯¦ç»†è°ƒè¯•ä¿¡æ¯ | `false` |
| `--debug-file <path>` | è°ƒè¯•ç‰¹å®šæ–‡ä»¶ | - |
| `--runtime` | å¯ç”¨è¿è¡Œæ—¶æ‰«æ | `false` |
| `--analyze-runtime` | åˆ†æè¿è¡Œæ—¶æ•°æ® | `false` |

## åŠŸèƒ½ç‰¹æ€§

### ğŸ” é™æ€åˆ†æ
- **å…¨é¢çš„å¯¼å…¥/å¯¼å‡ºåˆ†æ** - æ”¯æŒES6ã€CommonJSã€åŠ¨æ€å¯¼å…¥
- **Vueç‰¹æ€§æ”¯æŒ** - ç»„ä»¶ã€è·¯ç”±ã€Vuex/Pinia store
- **è·¯å¾„åˆ«åè§£æ** - è‡ªåŠ¨è¯†åˆ« `@`ã€è‡ªå®šä¹‰åˆ«å
- **æ™ºèƒ½å…¥å£ç‚¹æ£€æµ‹** - main.jsã€App.vueã€routerã€storeç­‰
- **ç²¾ç¡®çš„ä¾èµ–è¿½è¸ª** - æ–‡ä»¶çº§å’Œå¯¼å‡ºçº§æ­»ä»£ç æ£€æµ‹

### ğŸƒ è¿è¡Œæ—¶æ‰«æ
- **è‡ªåŠ¨æ³¨å…¥è·Ÿè¸ªè„šæœ¬** - æ— ä¾µå…¥å¼ä»£ç ä½¿ç”¨ç›‘æ§
- **Vue 3å®Œæ•´æ”¯æŒ** - Composition APIã€setupè¯­æ³•ç³–
- **å®æ—¶ä½¿ç”¨æ•°æ®æ”¶é›†** - ç»„ä»¶æŒ‚è½½ã€æ–¹æ³•è°ƒç”¨ã€è·¯ç”±å¯¼èˆª
- **æ¡†æ¶é›†æˆ** - Vue Router 4ã€Piniaã€Element Plus
- **ä½¿ç”¨æŠ¥å‘Šç”Ÿæˆ** - è¯¦ç»†çš„è¿è¡Œæ—¶ä½¿ç”¨ç»Ÿè®¡

### ğŸ›¡ï¸ å®‰å…¨ç‰¹æ€§
- **è‡ªåŠ¨å¤‡ä»½** - åˆ é™¤å‰åˆ›å»ºå®Œæ•´å¤‡ä»½
- **æµ‹è¯•éªŒè¯** - è‡ªåŠ¨è¿è¡Œnpm run devéªŒè¯
- **é¢„è§ˆæ¨¡å¼** - å…ˆæŸ¥çœ‹å†åˆ é™¤
- **ä¸€é”®æ¢å¤** - æ”¯æŒä»å¤‡ä»½å¿«é€Ÿæ¢å¤

## ä½¿ç”¨ç¤ºä¾‹

### åŸºç¡€ç”¨æ³•

```bash
# é¢„è§ˆæ¨¡å¼ - æŸ¥çœ‹å°†è¦åˆ é™¤çš„æ–‡ä»¶ï¼ˆæ¨èå…ˆæ‰§è¡Œï¼‰
ats cc -d ./vue-project --dry-run

# æ‰§è¡Œæ¸…ç†ï¼ˆé»˜è®¤åˆ›å»ºå¤‡ä»½ï¼‰
ats cc -d ./vue-project

# è·³è¿‡å¤‡ä»½ç›´æ¥æ¸…ç†ï¼ˆè°¨æ…ä½¿ç”¨ï¼‰
ats cc -d ./vue-project --no-backup

# è·³è¿‡æµ‹è¯•éªŒè¯
ats cc -d ./vue-project --skip-test
```

### é«˜çº§ç”¨æ³•

```bash
# æŒ‡å®šè‡ªå®šä¹‰å…¥å£æ–‡ä»¶
ats cc -d ./project -e "src/main.js,src/admin.js"

# æ’é™¤ç‰¹å®šæ–‡ä»¶æ¨¡å¼
ats cc -d ./project --exclude "*.test.js,*.spec.js,__tests__/**"

# åŒ…å«é¢å¤–çš„æ–‡ä»¶ç±»å‹
ats cc -d ./project --include "*.jsx,*.mjs"

# è°ƒè¯•æ¨¡å¼ - æŸ¥çœ‹è¯¦ç»†åˆ†æè¿‡ç¨‹
ats cc -d ./project --debug

# è°ƒè¯•ç‰¹å®šæ–‡ä»¶ä¸ºä»€ä¹ˆè¢«æ ‡è®°ä¸ºæ­»ä»£ç 
ats cc -d ./project --debug-file "src/components/MyComponent.vue"
```

### è¿è¡Œæ—¶æ‰«æ

```bash
# æ­¥éª¤1: æ³¨å…¥è¿è¡Œæ—¶è·Ÿè¸ªè„šæœ¬
ats cc -d ./vue-project --runtime

# æ­¥éª¤2: æ­£å¸¸ä½¿ç”¨ä½ çš„Vueåº”ç”¨ï¼Œè·Ÿè¸ªè„šæœ¬ä¼šè‡ªåŠ¨æ”¶é›†ä½¿ç”¨æ•°æ®

# æ­¥éª¤3: åˆ†ææ”¶é›†çš„è¿è¡Œæ—¶æ•°æ®
ats cc -d ./vue-project --analyze-runtime
```

## åˆ†æç»“æœç¤ºä¾‹

```
ğŸ”§ è§£æé¡¹ç›®é…ç½®...
ğŸ“‹ é¡¹ç›®ç±»å‹: Vite + Vue 3
ğŸ”— å‘ç° 3 ä¸ªè·¯å¾„åˆ«å: @, @components, @utils
ğŸ” å¼€å§‹åˆ†æé¡¹ç›®: /path/to/vue-project
ğŸ“ æ‰¾åˆ° 127 ä¸ªæºæ–‡ä»¶

================================================================================
ğŸ“Š æ­»ä»£ç åˆ†æç»“æœ
================================================================================

âŒ å‘ç° 8 ä¸ªå®Œå…¨æœªä½¿ç”¨çš„æ–‡ä»¶:
   1. src/components/OldModal.vue
   2. src/utils/deprecatedHelper.js
   3. src/views/UnusedPage.vue
   4. src/hooks/useOldFeature.js

âš ï¸ å‘ç° 12 ä¸ªæœªä½¿ç”¨çš„å¯¼å‡º:
   ğŸ“„ src/utils/helpers.js:
      ğŸ”¸ formatLegacyDate (named)
      ğŸ”¸ validateOldFormat (named)
   ğŸ“„ src/components/Button.vue:
      ğŸ”¸ deprecatedProp (named)

ğŸ›£ï¸ å‘ç° 3 ä¸ªæœªä½¿ç”¨çš„è·¯ç”±:
   1. /admin/legacy (legacy-admin)
      ğŸ“„ å®šä¹‰åœ¨: src/router/admin.js:45
   2. /test-page (test)
      ğŸ“„ å®šä¹‰åœ¨: src/router/index.js:78

ğŸ“ˆ ç»Ÿè®¡ä¿¡æ¯:
   âœ… ä½¿ç”¨çš„æ–‡ä»¶: 119 (93.7%)
   âŒ æ­»æ–‡ä»¶: 8 (6.3%)
   ğŸ“ æ€»æ–‡ä»¶æ•°: 127
   ğŸ”¸ æ­»å¯¼å‡º: 12
   ğŸ›£ï¸ æ€»è·¯ç”±æ•°: 24
   ğŸš« æœªä½¿ç”¨è·¯ç”±: 3 (12.5%)

ğŸ’¡ é¢„è®¡å¯æ¸…ç†ä»£ç : ~2,340 è¡Œ (å‡å°‘ 18.2% çš„ä»£ç ä½“ç§¯)
```

## æ”¯æŒçš„é¡¹ç›®ç±»å‹

### âœ… å®Œå…¨æ”¯æŒ
- **Vite + Vue 3** - æœ€ä½³æ”¯æŒï¼ŒåŒ…å«æ‰€æœ‰é«˜çº§ç‰¹æ€§
- **Vue CLI + Vue 2/3** - å®Œæ•´çš„webpacké…ç½®è§£æ
- **Nuxt 3** - SSR/SSGé¡¹ç›®æ”¯æŒ

### âš ï¸ éƒ¨åˆ†æ”¯æŒ
- **Webpacké¡¹ç›®** - éœ€è¦æ ‡å‡†çš„webpacké…ç½®
- **Rollupé¡¹ç›®** - åŸºç¡€å¯¼å…¥/å¯¼å‡ºåˆ†æ

## é…ç½®è§£æ

å·¥å…·ä¼šè‡ªåŠ¨è§£æä»¥ä¸‹é…ç½®æ–‡ä»¶ï¼š

### Viteé…ç½®
```javascript
// vite.config.js
export default {
  resolve: {
    alias: {
      '@': '/src',
      '@components': '/src/components'
    },
    extensions: ['.mjs', '.js', '.ts', '.jsx', '.tsx', '.json', '.vue']
  }
}
```

### Vue CLIé…ç½®
```javascript
// vue.config.js
module.exports = {
  configureWebpack: {
    resolve: {
      alias: {
        '@': path.resolve(__dirname, 'src')
      }
    }
  }
}
```

## æ™ºèƒ½è¯†åˆ«æ¨¡å¼

### å…¥å£æ–‡ä»¶æ£€æµ‹
è‡ªåŠ¨è¯†åˆ«ä»¥ä¸‹å…¥å£æ–‡ä»¶ï¼š
- `main.js`, `main.ts`, `app.js`, `app.ts`
- `App.vue`, `app.vue`
- `index.js`, `index.ts` (åœ¨srcç›®å½•)
- `router/index.js`, `store/index.js`
- é…ç½®æ–‡ä»¶: `vite.config.js`, `vue.config.js`

### åŠ¨æ€å¯¼å…¥æ”¯æŒ
```javascript
// æ”¯æŒçš„åŠ¨æ€å¯¼å…¥æ¨¡å¼
import('./components/LazyComponent.vue')
const module = await import(`./modules/${name}.js`)
component: () => import('./views/Home.vue')  // Vue Routeræ‡’åŠ è½½
```

### require.contextæ”¯æŒ
```javascript
// è‡ªåŠ¨è¯†åˆ«require.context
const modules = require.context('./modules', true, /\.js$/)
```

## æ³¨æ„äº‹é¡¹

1. **é¦–æ¬¡ä½¿ç”¨å»ºè®®** - å§‹ç»ˆå…ˆä½¿ç”¨ `--dry-run` é¢„è§ˆæ¨¡å¼
2. **å¤‡ä»½é‡è¦æ€§** - é»˜è®¤å¼€å¯å¤‡ä»½ï¼Œå»ºè®®ä¿ç•™æ­¤é€‰é¡¹
3. **æµ‹è¯•éªŒè¯** - è‡ªåŠ¨è¿è¡Œ `npm run dev` ç¡®ä¿é¡¹ç›®æ­£å¸¸
4. **è¿è¡Œæ—¶æ‰«æ** - å¯¹äºå¤æ‚é¡¹ç›®ï¼Œå»ºè®®ç»“åˆè¿è¡Œæ—¶æ‰«æè·å¾—æ›´å‡†ç¡®ç»“æœ
5. **è‡ªå®šä¹‰å…¥å£** - å¦‚æœæœ‰ç‰¹æ®Šå…¥å£æ–‡ä»¶ï¼Œä½¿ç”¨ `-e` é€‰é¡¹æŒ‡å®š

## æœ€ä½³å®è·µ

### æ¸è¿›å¼æ¸…ç†
```bash
# 1. å…ˆé¢„è§ˆ
ats cc -d ./project --dry-run

# 2. è°ƒè¯•å¯ç–‘æ–‡ä»¶
ats cc -d ./project --debug-file "src/components/Important.vue"

# 3. æ‰§è¡Œæ¸…ç†ï¼ˆä¿ç•™å¤‡ä»½ï¼‰
ats cc -d ./project

# 4. æµ‹è¯•é¡¹ç›®
npm run dev
npm run build
```

### ç»“åˆè¿è¡Œæ—¶æ‰«æ
```bash
# 1. æ³¨å…¥è·Ÿè¸ªè„šæœ¬
ats cc -d ./project --runtime

# 2. å……åˆ†ä½¿ç”¨åº”ç”¨çš„å„ä¸ªåŠŸèƒ½
# 3. åˆ†æè¿è¡Œæ—¶æ•°æ®
ats cc -d ./project --analyze-runtime

# 4. åŸºäºä¸¤ç§åˆ†æç»“æœè¿›è¡Œæ¸…ç†
ats cc -d ./project
```

## ç›¸å…³å‘½ä»¤

- [debug-file](./debug-file.md) - æ·±å…¥è°ƒè¯•æ–‡ä»¶å¼•ç”¨å…³ç³»
- [git-stats](./git-stats.md) - åˆ†æä»£ç å˜åŒ–è¶‹åŠ¿